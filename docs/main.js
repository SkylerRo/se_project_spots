!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},r=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?n(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)};var o;o=e,Array.from(document.querySelectorAll(o.formSelector)).forEach(e=>{((e,n)=>{const o=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);r(o,a,n),o.forEach(c=>{c.addEventListener("input",function(){((e,r,n)=>{r.validity.valid?t(e,r,n):((e,t,r,n)=>{e.querySelector(`#${t.id}-error`).textContent=r,t.classList.add(n.inputErrorClass)})(e,r,r.validationMessage,n)})(e,c,n),r(o,a,n)})})})(e,o)});const a=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}editUserInfo({name:e,about:t}){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}editUserAvatar({avatar:e}){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addCard({name:e,link:t}){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}updateLikedStatus({isLiked:e,id:t}){return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:e?"PUT":"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3515e1ab-2299-4d17-8ccd-400d73cf2a10","Content-Type":"application/json"}});a.getAppInfo().then(([e,t])=>{s.textContent=t.name,d.textContent=t.about,document.querySelector(".profile__avatar").src=t.avatar,e.forEach(e=>{const t=j(e);p.append(t)})}).catch(console.error);const c=document.querySelector(".profile__edit-btn"),s=document.querySelector(".profile__name"),d=document.querySelector(".profile__description"),l=document.querySelector("#edit-modal"),i=l.querySelector(".modal__form"),u=l.querySelector(".modal__close-btn"),_=l.querySelector(".modal__submit-btn"),m=document.querySelector(".profile__add-btn"),h=l.querySelector("#profile-name-input"),v=l.querySelector("#profile-description-input"),y=document.querySelector("#card-template"),p=document.querySelector(".cards__list"),S=document.querySelector("#add-card-modal"),f=S.querySelector(".modal__form"),b=S.querySelector(".modal__button"),q=S.querySelector(".modal__close-btn"),k=S.querySelector("#add-card-name-input"),E=S.querySelector("#add-card-link-input"),L=document.querySelector("#preview-modal"),C=L.querySelector(".modal__image"),g=L.querySelector(".modal__caption"),U=L.querySelector(".modal__close-btn"),x=document.querySelector("#delete-modal"),$=x.querySelector(".modal__form"),A=x.querySelector(".modal__close-btn"),I=x.querySelector(".modal__button-delete"),D=x.querySelector(".modal__cancel-btn"),R=document.querySelector("#edit-avatar-modal"),T=document.querySelector(".profile__avatar-btn"),w=R.querySelector(".modal__form"),B=(w.querySelector(".modal__submit-btn"),R.querySelector(".modal__close-btn")),P=document.getElementById("profile-avatar-input");let N,O;function j(e){const t=y.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__delete-btn");L.querySelector(".modal__close-btn"),r.textContent=e.name;const o=t.querySelector(".card__image"),c=t.querySelector(".card__like-button");return o.src=e.link,o.alt=e.name,e.isLiked&&c.classList.add("card__like-button_liked"),c.addEventListener("click",function(){a.updateLikedStatus({isLiked:!c.classList.contains("card__like-button_liked"),id:e._id}).then(()=>{c.classList.toggle("card__like-button_liked")}).catch(console.error)}),n.addEventListener("click",r=>function(e,t){O=e,N=t._id,z(x)}(t,e)),o.addEventListener("click",()=>{z(L),C.src=e.link,C.alt=e.name,g.textContent=e.name}),t}function J(e){e.target.classList.contains("modal_opened")&&M(e.target)}function H(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&M(e)}}function z(e){e.classList.add("modal_opened"),document.addEventListener("mousedown",J),document.addEventListener("keydown",H)}function M(e){e.classList.remove("modal_opened"),document.removeEventListener("mousedown",J),document.removeEventListener("keydown",H)}A.addEventListener("click",()=>{M(x)}),D.addEventListener("click",()=>{M(x)}),c.addEventListener("click",()=>{h.value=s.textContent,v.value=d.textContent,((e,r,n)=>{r.forEach(r=>{t(e,r,n)})})(i,[h,v],e),z(l)}),u.addEventListener("click",()=>{M(l)}),m.addEventListener("click",()=>{z(S)}),q.addEventListener("click",()=>{M(S)}),U.addEventListener("click",()=>{M(L)}),T.addEventListener("click",()=>{z(R)}),B.addEventListener("click",()=>{M(R)}),w.addEventListener("submit",function(e){e.preventDefault(),a.editUserAvatar({avatar:P.value}).then(e=>{document.querySelector(".profile__avatar").src=e.avatar,M(R)}).catch(console.error)}),$.addEventListener("submit",function(e){e.preventDefault(),I.textContent="Deleting...",a.deleteCard(N).then(()=>{O.remove(),M(x)}).catch(e=>{console.error(e)}).finally(()=>{I.textContent="Delete"})}),i.addEventListener("submit",function(e){e.preventDefault(),_.textContent="Saving...",a.editUserInfo({name:h.value,about:v.value}).then(e=>{s.textContent=e.name,d.textContent=e.about,M(l)}).catch(e=>{console.error(e)}).finally(()=>{_.textContent="Save"})}),f.addEventListener("submit",function(t){t.preventDefault();const r={name:k.value,link:E.value};b.textContent="Saving...",a.addCard(r).then(r=>{const o=j(r);p.prepend(o),t.target.reset(),n(b,e),M(S)}).catch(e=>{console.error("Error adding card:",e)}).finally(()=>{b.textContent="Save"})})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BDMkIsRUFDRzZCLFdBQVdpRCxHQUNYM0QsS0FBSyxLQUNKNEQsRUFBYXhHLFNBQ2J5SCxFQUFXN0IsS0FFWnRCLE1BQU9FLElBQ05ELFFBQVFDLE1BQU1BLEtBRWY0RCxRQUFRLEtBQ1ByQyxFQUFzQmpHLFlBQWMsVUFFMUMsR0EyQ0E2RSxFQUFnQnZELGlCQUFpQixTQTdIakMsU0FBaUNpSCxHQUMvQkEsRUFBRUYsaUJBQ0Z0RCxFQUFtQi9FLFlBQWMsWUFDakMyQixFQUNHb0IsYUFBYSxDQUNaQyxLQUFNaUMsRUFBbUJnRCxNQUN6QmhGLE1BQU9pQyxFQUEwQitDLFFBRWxDbkYsS0FBTTZELElBQ0wzQyxFQUFZaEUsWUFBYzJHLEVBQUszRCxLQUMvQmlCLEVBQWtCakUsWUFBYzJHLEVBQUsxRCxNQUNyQzBFLEVBQVcvQyxLQUVaSixNQUFPRSxJQUNORCxRQUFRQyxNQUFNQSxLQUVmNEQsUUFBUSxLQUNQdkQsRUFBbUIvRSxZQUFjLFFBRXZDLEdBMkdBcUYsRUFBUy9ELGlCQUFpQixTQXpHMUIsU0FBNkJnRyxHQUMzQkEsRUFBSWUsaUJBQ0osTUFBTUcsRUFBYyxDQUFFeEYsS0FBTXdDLEVBQWN5QyxNQUFPdkUsS0FBTStCLEVBQWN3QyxPQUNyRTNDLEVBQWN0RixZQUFjLFlBQzVCMkIsRUFDRzhCLFFBQVErRSxHQUNSMUYsS0FBTTZELElBQ0wsTUFBTXZDLEVBQWNDLEVBQWVzQyxHQUNuQ3JDLEVBQVVtRSxRQUFRckUsR0FDbEJrRCxFQUFJSSxPQUFPZ0IsUUFDWC9ILEVBQWMyRSxFQUFlOEMsR0FDN0JULEVBQVd2QyxLQUVaWixNQUFPRSxJQUNORCxRQUFRQyxNQUFNLHFCQUFzQkEsS0FFckM0RCxRQUFRLEtBQ1BoRCxFQUFjdEYsWUFBYyxRQUVsQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5jb25zdCBzaG93SXB1dEVycm9yID0gKGZvcm1FTCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRUwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XHJcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVMLCBpbnB1dEVsLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVMLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FTCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SXB1dEVycm9yKGZvcm1FTCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVMLCBpbnB1dEVsLCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRUwsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVMLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVMLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG5cclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FTCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FTCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVMLCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcblxyXG5leHBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncyBhcyBWYWxpZGF0aW9uQ29uZmlnLCBkaXNhYmxlQnV0dG9uLCByZXNldFZhbGlkYXRpb24gfTtcclxuIiwiaW1wb3J0IHtcclxuICBlbmFibGVWYWxpZGF0aW9uLFxyXG4gIFZhbGlkYXRpb25Db25maWcsXHJcbiAgZGlzYWJsZUJ1dHRvbixcclxuICByZXNldFZhbGlkYXRpb24sXHJcbn1cclxuZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcclxuXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIGluZGV4LmpzXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIzNTE1ZTFhYi0yMjk5LTRkMTctOGNjZC00MDBkNzNjZjJhMTBcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpXHJcbiAgLmdldEFwcEluZm8oKVxyXG4gIC50aGVuKChbY2FyZHMsIHVzZXJJbmZvXSkgPT4ge1xyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgcHJvZmlsZURlc2NyaXRpb24udGV4dENvbnRlbnQgPSB1c2VySW5mby5hYm91dDtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IHVzZXJJbmZvLmF2YXRhcjtcclxuXHJcbiAgICBjYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XHJcbiAgICAgIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbmNvbnN0IGVkaXRNb2RhbENsb3NlQnRuID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcclxuXHJcbmNvbnN0IGVkaXRNb2RhbFN1Ym1pdEJ0biA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xyXG5cclxuY29uc3QgY2FyZE1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5cclxuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRGb3JtID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkTW9kYWxDbG9zZUJ0biA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XHJcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkbGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZUVMID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xyXG5cclxuLy9kZWxldGUgbW9kYWwgZWxlbWVudHNcclxuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcclxuY29uc3QgZGVsZXRlRm9ybSA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsQ2xvc2VCdG4gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsQ29uZmlybUJ0biA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvbi1kZWxldGVcIik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsQ2FuY2VsQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FuY2VsLWJ0blwiKTtcclxuXHJcbi8vIEF2YXRhciBmb3JtIGVsZW1lbnRzXHJcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1hdmF0YXItbW9kYWxcIik7XHJcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ0blwiKTtcclxuY29uc3QgZWRpdEF2YXRhckZvcm0gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgZWRpdEF2YXRhclN1Ym1pdEJ0biA9IGVkaXRBdmF0YXJGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XHJcbmNvbnN0IGNsb3NlQXZhdGFyTW9kYWxCdG4gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xyXG5jb25zdCBlZGl0QXZhdGFyRnJvbUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWF2YXRhci1pbnB1dFwiKTtcclxuXHJcblxyXG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XHJcbmxldCBzZWxlY3RlZENhcmQ7XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG5cclxuICBjb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XHJcblxyXG4gIGNhcmROYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcblxyXG4gIGNvbnN0IGNhcmRJbWcgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICBjb25zdCBjYXJkTGlrZWRCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG5cclxuICBjYXJkSW1nLnNyYyA9IGRhdGEubGluaztcclxuXHJcbiAgY2FyZEltZy5hbHQgPSBkYXRhLm5hbWU7XHJcblxyXG4gIGlmIChkYXRhLmlzTGlrZWQpIHtcclxuICAgIGNhcmRMaWtlZEJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XHJcbiAgfVxyXG5cclxuICBjYXJkTGlrZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUxpa2VCdXR0b25DbGljayk7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUxpa2VCdXR0b25DbGljaygpIHtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlTGlrZWRTdGF0dXMoe1xyXG4gICAgICAgIGlzTGlrZWQ6ICFjYXJkTGlrZWRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIiksXHJcbiAgICAgICAgaWQ6IGRhdGEuX2lkLH0pXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkTGlrZWRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+XHJcbiAgICBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKVxyXG4gICk7XHJcblxyXG4gIGNhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xyXG4gICAgcHJldmlld01vZGFsSW1hZ2VFTC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVMLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xpY2soZXZ0KSB7XHJcbiAgLy8gY2xpY2sgb3V0c2lkZVxyXG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgY2xvc2VNb2RhbChldnQudGFyZ2V0KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVzY2FwZUtleShldnQpIHtcclxuICAvLyBwdXNoIGVzY2FwZSBrZXlcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGlmIChhY3RpdmVNb2RhbCkge1xyXG4gICAgICBjbG9zZU1vZGFsKGFjdGl2ZU1vZGFsKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlT3ZlcmxheUNsaWNrKTtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGVkaXRNb2RhbFN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgYXBpXHJcbiAgICAuZWRpdFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlLFxyXG4gICAgICBhYm91dDogZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSxcclxuICAgIH0pXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgcHJvZmlsZURlc2NyaXRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gICAgICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRNb2RhbFN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRsaW5rSW5wdXQudmFsdWUgfTtcclxuICBjYXJkU3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcclxuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICAgIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ0biwgVmFsaWRhdGlvbkNvbmZpZyk7XHJcbiAgICAgIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhZGRpbmcgY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZFN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckVkaXRTdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgYXBpXHJcbiAgICAuZWRpdFVzZXJBdmF0YXIoeyBhdmF0YXI6IGVkaXRBdmF0YXJGcm9tSW5wdXQudmFsdWUgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG59XHJcbi8vIGhhbmRsZXIgZm9yIGRlbGV0ZSBtb2RhbFxyXG5kZWxldGVNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XHJcbn0pO1xyXG5cclxuZGVsZXRlTW9kYWxDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKSB7XHJcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XHJcbiAgc2VsZWN0ZWRDYXJkSWQgPSBkYXRhLl9pZDtcclxuICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kZWxEZWxldGVTdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZGVsZXRlTW9kYWxDb25maXJtQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcclxuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZU1vZGFsQ29uZmlybUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gaGFuZGxlciBmb3IgZWRpdCBwcm9maWxlIG1vZGFsXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcml0aW9uLnRleHRDb250ZW50O1xyXG4gIHJlc2V0VmFsaWRhdGlvbihcclxuICAgIGVkaXRGb3JtRWxlbWVudCxcclxuICAgIFtlZGl0TW9kYWxOYW1lSW5wdXQsIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXRdLFxyXG4gICAgVmFsaWRhdGlvbkNvbmZpZ1xyXG4gICk7XHJcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XHJcbn0pO1xyXG5cclxuZWRpdE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XHJcbn0pO1xyXG5cclxuLy8gaGFuZGxlcnMgZm9yIGNhcmQgY3JlYXRpb24gbW9kYWxcclxuY2FyZE1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XHJcbn0pO1xyXG5cclxuY2FyZE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XHJcbn0pO1xyXG5cclxucHJldmlld01vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XHJcbn0pO1xyXG5cclxuZWRpdEF2YXRhck1vZGFsYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XHJcbn0pO1xyXG5cclxuY2xvc2VBdmF0YXJNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZWRpdEF2YXRhck1vZGFsKTtcclxufSk7XHJcblxyXG5lZGl0QXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhckVkaXRTdWJtaXQpO1xyXG5cclxuZGVsZXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRlbERlbGV0ZVN1Ym1pdCk7XHJcblxyXG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XHJcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG4gICBcclxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG4gIC8vIFRPRE86IGFkZCBtZXRob2RzIGZvciBsaWtpbmcgYW5kIGRpc2xpa2luZyBhIGNhcmRcclxuICB1cGRhdGVMaWtlZFN0YXR1cyh7IGlzTGlrZWQsIGlkIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJQVVRcIiA6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVMIiwiaW5wdXRFbCIsImNvbmZpZyIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJidXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJcHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiYXBpIiwiY29uc3RydWN0b3IiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0QXBwSW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiZWRpdFVzZXJJbmZvIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0VXNlckF2YXRhciIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJhZGRDYXJkIiwibGluayIsInVwZGF0ZUxpa2VkU3RhdHVzIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJjYXJkcyIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpdGlvbiIsInNyYyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiY2FyZHNMaXN0IiwiYXBwZW5kIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImVkaXRNb2RhbCIsImVkaXRGb3JtRWxlbWVudCIsImVkaXRNb2RhbENsb3NlQnRuIiwiZWRpdE1vZGFsU3VibWl0QnRuIiwiY2FyZE1vZGFsQnRuIiwiZWRpdE1vZGFsTmFtZUlucHV0IiwiZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNhcmRNb2RhbCIsImNhcmRGb3JtIiwiY2FyZFN1Ym1pdEJ0biIsImNhcmRNb2RhbENsb3NlQnRuIiwiY2FyZE5hbWVJbnB1dCIsImNhcmRsaW5rSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVMIiwicHJldmlld01vZGFsQ2FwdGlvbkVsIiwicHJldmlld01vZGFsQ2xvc2VCdXR0b24iLCJkZWxldGVNb2RhbCIsImRlbGV0ZUZvcm0iLCJkZWxldGVNb2RhbENsb3NlQnRuIiwiZGVsZXRlTW9kYWxDb25maXJtQnRuIiwiZGVsZXRlTW9kYWxDYW5jZWxCdG4iLCJlZGl0QXZhdGFyTW9kYWwiLCJlZGl0QXZhdGFyTW9kYWxidG4iLCJlZGl0QXZhdGFyRm9ybSIsImNsb3NlQXZhdGFyTW9kYWxCdG4iLCJlZGl0QXZhdGFyRnJvbUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZWxlY3RlZENhcmRJZCIsInNlbGVjdGVkQ2FyZCIsImRhdGEiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImRlbGV0ZUJ1dHRvbiIsImNhcmRJbWciLCJjYXJkTGlrZWRCdG4iLCJhbHQiLCJjb250YWlucyIsIl9pZCIsInRvZ2dsZSIsImV2dCIsIm9wZW5Nb2RhbCIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVPdmVybGF5Q2xpY2siLCJ0YXJnZXQiLCJjbG9zZU1vZGFsIiwiaGFuZGxlRXNjYXBlS2V5Iiwia2V5IiwiYWN0aXZlTW9kYWwiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsInJlc2V0VmFsaWRhdGlvbiIsImZvcm1FbCIsIlZhbGlkYXRpb25Db25maWciLCJwcmV2ZW50RGVmYXVsdCIsImZpbmFsbHkiLCJlIiwiaW5wdXRWYWx1ZXMiLCJwcmVwZW5kIiwicmVzZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==